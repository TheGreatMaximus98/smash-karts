(()=>{"use strict";var e,t,n,r,o={583:(e,t,n)=>{n.d(t,{Z:()=>r});const r={ready:"pokiAppReady",adblocked:"pokiAppAdblocked",startLoading:"pokiAppStartLoading",ads:{completed:"pokiAdsCompleted",error:"pokiAdsError",impression:"pokiAdsImpression",durationChange:"pokiAdsDurationChange",limit:"pokiAdsLimit",ready:"pokiAdsReady",requested:"pokiAdsRequested",prebidRequested:"pokiAdsPrebidRequested",skipped:"pokiAdsSkipped",started:"pokiAdsStarted",stopped:"pokiAdsStopped",busy:"pokiAdsBusy",inFlight:"pokiAdsInflight",position:{preroll:"PP",midroll:"PM",rewarded:"PR",display:"DP"},video:{clicked:"pokiVideoAdsClicked",firstQuartile:"pokiVideoAdsFirstQuartile",midPoint:"pokiVideoAdsMidPoint",thirdQuartile:"pokiVideoAdsThirdQuartile",error:"pokiVideoAdsError",loaderError:"pokiVideoAdsLoaderError",paused:"pokiVideoAdsPauseTriggered",resumed:"pokiVideoAdsResumedTriggered",progress:"pokiVideoAdsProgress",buffering:"pokiVideoAdsBuffering",startHouseAdFlow:"pokiVideoAdsStartHouseAdFlow"},display:{error:"pokiDisplayAdsError"}},info:{messages:{timeLimit:"The ad-request was not processed, because of a time constraint",prerollLimit:"The ad-request was cancelled, because we're not allowed to show a preroll (PokiSDK.commercialBreak before PokiSDK.gameplayStart)",disabled:"The ad-request was cancelled, because we've disabled this format for this specific configuration"}},playtest:{startVideo:"pokiPlaytestStartVideo",stopVideo:"pokiPlaytestStopVideo"},message:{event:"pokiMessageEvent",sdkDetails:"pokiMessageSdkDetails",setPokiURLParams:"pokiMessageSetPokiURLParams",sendGameScreenshot:"pokiMessageSendScreenshot",sendGameRawScreenshot:"pokiMessageSendRawScreenshot",sendUploadScreenshot:"pokiMessageSendUploadScreenshot",sendCommand:"pokiMessageSendCommand",sendInspectorCookies:"pokiMessageSendInspectorCookies"},tracking:{custom:"pokiTrackingCustom",debugTrueInProduction:"pokiMessageDebugTrueProduction",screen:{gameplayStart:"pokiTrackingScreenGameplayStart",gameplayStop:"pokiTrackingScreenGameplayStop",gameLoadingFinished:"pokiTrackingScreenGameLoadingFinished",commercialBreak:"pokiTrackingScreenCommercialBreak",rewardedBreak:"pokiTrackingScreenRewardedBreak",firstRound:"pokiTrackingScreenFirstRound",roundStart:"pokiTrackingScreenRoundStart",roundEnd:"pokiTrackingScreenRoundEnd",displayAd:"pokiTrackingScreenDisplayAdRequest",destroyAd:"pokiTrackingScreenDisplayAdDestroy",playerActive:"pokiTrackingScreenPlayerActive"},playtest:{showModal:"pokiTrackingPlaytestShowModal",accepted:"pokiTrackingPlaytestAccepted",rejected:"pokiTrackingPlaytestRejected",noCanvas:"pokiTrackingPlaytestNoCanvas",starting:"pokiTrackingPlaytestStarting",connected:"pokiTrackingPlaytestConnected",closed:"pokiTrackingPlaytestClosed",error:"pokiTrackingPlaytestError"},sdk:{status:{initialized:"pokiTrackingSdkStatusInitialized",failed:"pokiTrackingSdkStatusFailed"}},ads:{status:{busy:"pokiTrackingAdsStatusBusy",completed:"pokiTrackingAdsStatusCompleted",error:"pokiTrackingAdsStatusError",impression:"pokiTrackingAdsStatusImpression",limit:"pokiTrackingAdsStatusLimit",ready:"pokiTrackingAdsStatusReady",requested:"pokiTrackingAdsStatusRequested",prebidRequested:"pokiTrackingAdsStatusPrebidRequested",skipped:"pokiTrackingAdsStatusSkipped",started:"pokiTrackingAdsStatusStarted",buffering:"pokiTrackingAdsStatusBuffering"},video:{clicked:"pokiTrackingAdsVideoClicked",error:"pokiTrackingAdsVideoError",loaderError:"pokiTrackingAdsVideoLoaderError",progress:"pokiTrackingAdsVideoProgress",paused:"pokiTrackingAdsVideoPaused",resumed:"pokiTrackingAdsVideoResumed"},display:{requested:"pokiTrackingScreenDisplayAdRequested",impression:"pokiTrackingScreenDisplayAdImpression"},rewardedWeb:{request:"pokiTrackingRewardedWebRequest",ready:"pokiTrackingRewardedWebReady",impression:"pokiTrackingRewardedWebImpression",closedGranted:"pokiTrackingRewardedWebClosedGranted",closedDeclined:"pokiTrackingRewardedWebclosedDeclined",empty:"pokiTrackingRewardedWebEmpty"}}}}},95:(e,t,n)=>{n.d(t,{K:()=>w,S8:()=>y,ZP:()=>b});var r=n(583),o=n(453),i=n(715),a=n(906);var s=n(801),c=n(298),u=n(687),d=n(888),l=n(272),p=n(128);var f=n(459);function h(){var e;try{e=performance.getEntriesByType("resource").map((function(e){return e.transferSize})).reduce((function(e,t){return e+t})),e+=performance.getEntriesByType("navigation")[0].transferSize}catch(e){}return e}var v=function(){return v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},v.apply(this,arguments)},m=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},g=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},y="once",w="off";const b=function(){function e(t){var n=this;this.gameStarted=!1,this.duringGameplay=!1,this.fpsStats=new l.V(.01),this.lastInteractionTime=0,this.lastGamePlayStop=0,this.badEventsCounter=0,this.asyncScreenshotLoader=function(){window.addEventListener("message",(function(e){return m(n,void 0,void 0,(function(){var t;return g(this,(function(n){switch(n.label){case 0:return"pokiGenerateScreenshot"!==e.data.type?[3,1]:((0,f.FR)(e.data),[3,4]);case 1:return"pokiGenerateRawScreenshot"!==e.data.type?[3,2]:((0,f.Ii)(),[3,4]);case 2:return"pokiUploadScreenshot"!==e.data.type?[3,4]:[4,(0,f.lW)(e.data)];case 3:t=n.sent(),i.Z.sendMessage(r.Z.message.sendUploadScreenshot,{data:{screenshot:t}}),n.label=4;case 4:return[2]}}))}))}),!1)},this.setupInspector=function(){var e=0;window.addEventListener("message",(function(t){return m(n,void 0,void 0,(function(){return g(this,(function(n){var o,a;return"pokiInspectorRequestCookies"===t.data.type?(0,p.$)().then((function(e){i.Z.sendMessage(r.Z.message.sendInspectorCookies,{data:{cookies:e}})})):"pokiInspectorSetFPS"===t.data.type&&(e=t.data.fps||0)&&(o=performance.now(),a=function(){if(e){for(var t=o+1e3/e;!((o=performance.now())>=t););requestAnimationFrame(a)}},requestAnimationFrame(a)),[2]}))}))}),!1)},this.initWithVideoHB=function(){return n.init()},this.setDebug=function(e){void 0===e&&(e=!0);var t=window.location.hostname;t.endsWith("poki-gdn.com")||"qa-files.poki.com"===t?e&&o.Z.track(r.Z.tracking.debugTrueInProduction):(c.Z.debug=e,c.Z.log=null!=e?e:c.Z.log,e?(0,s.lF)():(0,s.MT)())},this.setLogging=function(e){c.Z.log=e},this.gameLoadingFinished=function(){var e,t,n,i;clearInterval(window.pokiCancelProgressInterval),o.Z.track(r.Z.tracking.screen.gameLoadingFinished,{transferSize:h(),trackers:(n=window,i=[],"function"!=typeof n.ga&&"function"!=typeof n.gtag||i.push("ga"),n.mixpanel&&"function"==typeof n.mixpanel.track&&i.push("mixpanel"),"function"==typeof n.GameAnalytics&&i.push("gameanalytics"),(n.kongregateAPI||n.kongregate)&&i.push("kongregate"),n.FlurryAgent&&i.push("flurry"),n.Countly&&i.push("countly"),n.amplitude&&i.push("amplitude"),i).join(","),error_session_id:s.ZB,now:Math.round(null===(t=null===(e=window.performance)||void 0===e?void 0:e.now)||void 0===t?void 0:t.call(e))||void 0})},this.gameplayStart=function(e){var t;n.ignoreEvents()?c.Z.debug&&console.error("gameplayStart ignored because of too many events"):(n.duringGameplay=!0,n.gameStarted||(n.gameStarted=!0,o.Z.track(r.Z.tracking.screen.firstRound),n.monetization.startStartAdsAfterTimer()),performance.now()-n.lastInteractionTime<5e3&&(t=n.lastInteractionEvent),o.Z.track(r.Z.tracking.screen.gameplayStart,v(v({},e),{fps:n.fpsStats.stats(),badEvents:n.badEventsCounter,interaction:t})),clearTimeout(n.playerActiveTimeout),n.playerActiveTimeout=setTimeout((function(){window.addEventListener("pointermove",n.playerIsActiveEvent),document.addEventListener("keydown",n.playerIsActiveEvent)}),6e5),n.lastGamePlayStop&&(n.lastGamePlayStop>performance.now()-50&&n.badEventsCounter++,n.lastGamePlayStop=0))},this.gameplayStop=function(e){n.ignoreEvents()?c.Z.debug&&console.error("gameplayStop ignored because of too many events"):(n.duringGameplay=!1,o.Z.track(r.Z.tracking.screen.gameplayStop,v(v({},e),{fps:n.fpsStats.stats()})),clearTimeout(n.playerActiveTimeout),window.removeEventListener("pointermove",n.playerIsActiveEvent),document.removeEventListener("keydown",n.playerIsActiveEvent),n.lastGamePlayStop=performance.now())},this.roundStart=function(e){void 0===e&&(e=""),n.ignoreEvents()?c.Z.debug&&console.error("roundStart ignored because of too many events"):(e=String(e),o.Z.track(r.Z.tracking.screen.roundStart,{identifier:e}))},this.roundEnd=function(e){void 0===e&&(e=""),n.ignoreEvents()?c.Z.debug&&console.error("roundEnd ignored because of too many events"):(e=String(e),o.Z.track(r.Z.tracking.screen.roundEnd,{identifier:e}))},this.customEvent=function(e,t,i){void 0===i&&(i={}),e&&t?(e=String(e),t=String(t),i=v({},i),o.Z.track(r.Z.tracking.custom,{eventNoun:e,eventVerb:t,eventData:i})):n.error("customEvent","customEvent needs at least a noun and a verb")},this.commercialBreak=function(e){return new Promise((function(t){if(n.ignoreEvents())return c.Z.debug&&console.error("commercialBreak ignored because of too many events"),void t();var o=n.gameStarted?r.Z.ads.position.midroll:r.Z.ads.position.preroll;n.monetization.requestAd({position:o,onFinish:t,onStart:e})}))},this.rewardedBreak=function(e,t,o,i){return new Promise((function(a){var s,c={};"function"==typeof e?(s=e,void 0!==t&&(c.category=t),void 0!==o&&(c.details=o),void 0!==i&&(c.placement=i)):(void 0!==e&&(c.category=e),void 0!==t&&(c.details=t),void 0!==o&&(c.placement=o)),setTimeout((function(){c.category&&performance.now()-n.lastInteractionTime<500&&(c.from=n.lastInteractionEvent);var e=r.Z.ads.position.rewarded;n.monetization.requestAd({position:e,onFinish:function(e){a(!!(null==e?void 0:e.rewardAllowed))},onStart:s,rewardedKVs:c})}),0)}))},this.displayAd=function(e,t,i,a){var s=(0,u.Z)();o.Z.track(r.Z.tracking.screen.displayAd,{size:t,opportunityId:s,duringGameplay:n.duringGameplay});var c={container:e,opportunityId:s,size:t,duringGameplay:function(){return n.duringGameplay},onCanDestroy:i,onDisplayRendered:a};n.monetization.displayAd(c)},this.isAdBlocked=function(){return!1},this.muteAd=function(){n.monetization.muteAd()},this.logError=function(e){n.captureError(e)},this.setPlaytestCanvas=function(e){return n.playtestSetCanvas(e)},this.playtestSetCanvas=function(t){e.playtestCanvas=t?[].concat(t):[]},this.playtestCaptureHtmlOnce=function(){e.playtestCaptureUI=y},this.playtestCaptureHtmlOff=function(){e.playtestCaptureUI=w},this.getIsoLanguage=function(){return(0,a.Z)("iso_lang")},this.shareableURL=function(e){return void 0===e&&(e={}),new Promise((function(t,n){var o=new URLSearchParams,s=Object.keys(e);if(d.Z.isPokiIframe){var c=(0,a.Z)("poki_url");s.forEach((function(t){void 0!==e[t]&&null!==e[t]&&o.set("gd".concat(t),e[t])})),t("".concat(c,"?").concat(o.toString())),i.Z.sendMessage(r.Z.message.setPokiURLParams,{params:e})}else window.self===window.top?(s.forEach((function(t){void 0!==e[t]&&null!==e[t]&&o.set("".concat(t),e[t])})),t("".concat(window.location.origin).concat(window.location.pathname,"?").concat(o.toString()))):n(new Error("shareableURL only works on Poki or a top level frame"))}))},this.getURLParam=function(e){return(0,a.Z)("gd".concat(e))||(0,a.Z)(e)},this.captureError=function(e){(0,s.$r)(e)},this.getLanguage=function(){return navigator.language.toLowerCase().split("-")[0]},this.generateScreenshot=function(){return m(n,void 0,void 0,(function(){return g(this,(function(e){return[2,(0,f.iz)()]}))}))},this.enableEventTracking=function(e){window.top===window&&o.Z.setupObserverWithCMP(e||0)},this.error=function(e,t){console.error("PokiSDK.".concat(e,": ").concat(t))},this.playerIsActiveEvent=function(){window.removeEventListener("pointermove",n.playerIsActiveEvent),document.removeEventListener("keydown",n.playerIsActiveEvent),o.Z.track(r.Z.tracking.screen.playerActive),n.playerActiveTimeout=setTimeout((function(){window.addEventListener("pointermove",n.playerIsActiveEvent),document.addEventListener("keydown",n.playerIsActiveEvent)}),6e5)},this.interactionEvent=function(e){"mousedown"===e.type?n.lastInteractionEvent="mousedown":"pointerdown"===e.type?n.lastInteractionEvent="pointerdown":"keydown"===e.type&&(n.lastInteractionEvent="keydown-".concat(e.code)),n.lastInteractionTime=performance.now()},this.setDebugTouchOverlayController=function(){},this.gameInteractive=function(){},this.gameLoadingProgress=function(){},this.gameLoadingStart=function(){},this.getLeaderboard=function(){return Promise.resolve([])},this.happyTime=function(){},this.sendHighscore=function(){},this.setPlayerAge=function(){},this.monetization=t,this.SDK=this.monetization,setInterval((function(){n.badEventsCounter=Math.max(n.badEventsCounter-1,0)}),1e3)}return e.prototype.init=function(e){var t=this;return void 0===e&&(e={}),window.addEventListener("pointerdown",this.interactionEvent),document.addEventListener("keydown",this.interactionEvent),new Promise((function(n){t.monetization.init(v({onReady:function(){(0,a.Z)("preroll")&&t.monetization.forcePreroll(),n()}},e)),t.asyncScreenshotLoader(),("inspector-uploads.poki-user-content.com"===window.location.hostname||document.referrer.startsWith("https://inspector.poki.dev/"))&&t.setupInspector(),i.Z.sendMessage(r.Z.message.sdkDetails,{version:"a7c3d8457e9d001550c049f821d50d7c386f7a05"})}))},e.prototype.ignoreEvents=function(){return this.badEventsCounter>=10},e.prototype.destroyAd=function(e){this.monetization.destroyAd(e)},e.prototype.setVolume=function(e){this.monetization.setVolume(e)},e.getGameCanvasses=function(){var t=e.playtestCanvas;if(null==t?void 0:t.length)return t;var n=0,r=Array.from(document.getElementsByTagName("canvas")),o=[];return r.forEach((function(e){if("true"!==e.getAttribute("data-no-playtest")){var t=getComputedStyle(e),r=t.width,i=t.height,a=parseInt(r,10)*parseInt(i,10);a>=n&&function(e){if(!e)return!1;for(var t=e,n=!0;t&&t!==document.body;){var r=window.getComputedStyle(t);if("none"===r.display)return!1;if("hidden"===r.visibility)return!1;if(n&&(0===t.offsetWidth||0===t.offsetHeight))return!1;"absolute"===r.position&&(n=!1),t=t.parentElement}var o=e.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,a=window.innerWidth||document.documentElement.clientWidth;return!(o.right<0||o.bottom<0||o.left>a||o.top>i)}(e)&&(a>n&&(o=[]),o.push({canvas:e,style:t,index:o.length}),n=a)}})),o.sort((function(e,t){var n=parseInt(e.style.zIndex,10)||0,r=parseInt(t.style.zIndex,10)||0;return n<r?-1:n>r?1:e.index-t.index})),o.map((function(e){return e.canvas}))},e.playtestCaptureUI="",e}()},715:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(583),o=n(992),i=n(888);const a=function(){function e(){}return e.sendMessage=function(e,t,n){if(void 0===n&&(n=window.parent),!(0,o.Z)(e,r.Z.message)){var a=Object.keys(r.Z.message).map((function(e){return"poki.message.".concat(e)}));throw new TypeError("Argument 'type' must be one of ".concat(a.join(", ")))}var s=t||{};i.Z.gameID&&i.Z.versionID&&(s.pokifordevs={game_id:i.Z.gameID,game_version_id:i.Z.versionID}),null==n||n.postMessage({type:e,content:s},"*")},e}()},58:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(298),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o.apply(this,arguments)};const i=function(){function e(){}return e.clearEventListeners=function(){this.listeners={}},e.removeEventListener=function(e,t){if(Object.prototype.hasOwnProperty.call(this.listeners,e)){var n=this.listeners[e].indexOf(t);-1!==n&&this.listeners[e].splice(n,1)}},e.addEventListener=function(e,t,n){var r=this;if(void 0===n&&(n=!1),n=!!n,Object.prototype.hasOwnProperty.call(this.listeners,e)||(this.listeners[e]=[]),n){var o=function(n){r.removeEventListener.bind(r)(e,o),t(n)};this.listeners[e].push(o)}else this.listeners[e].push(t)},e.dispatchEvent=function(e,t){var n,i;void 0===t&&(t={}),r.Z.debug&&"test"!==(null===(i=null===(n=null===window||void 0===window?void 0:window.process)||void 0===n?void 0:n.env)||void 0===i?void 0:i.NODE_ENV)&&console.info(e,t);for(var a=Object.keys(this.listeners),s=0;s<a.length;s++){var c=a[s];if(e===c)for(var u=this.listeners[c],d=0;d<u.length;d++)u[d](o(o({},this.dataAnnotations),t))}},e.setVideoDataAnnotations=function(e){this.dataAnnotations=o(o({},this.dataAnnotations),e)},e.getVideoDataAnnotations=function(){return this.dataAnnotations},e.clearVideoDataAnnotations=function(){this.dataAnnotations={}},e.listeners={},e.dataAnnotations={},e}()},128:(e,t,n)=>{n.d(t,{$:()=>c,Z:()=>u});var r=n(888),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},a=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},s=Math.random().toString(36).substr(2,9);function c(){return o(this,void 0,void 0,(function(){var e,t,n;return i(this,(function(r){switch(r.label){case 0:return[4,window.cookieStore.getAll()];case 1:return e=r.sent(),window.indexedDB.databases?[4,window.indexedDB.databases()]:[3,3];case 2:return n=r.sent(),[3,4];case 3:n=[],r.label=4;case 4:return t=n,[2,a(a(a([],e.map((function(e){return{name:e.name,expire_seconds:Math.round((e.expires-Date.now())/1e3),type:"cookie",domain:e.domain}})),!0),Object.keys(window.localStorage).map((function(e){return{name:e,expire_seconds:15552e3,type:"localStorage"}})),!0),t.map((function(e){return{name:e.name,expire_seconds:0,type:"idb"}})),!0)]}}))}))}const u=function(){function e(){}return e.collectAndLog=function(){return o(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t={},[4,c()];case 1:return t.cookies=n.sent(),t.p4d_game_id=r.Z.gameID,t.user_id=s,e=t,window.fetch("https://t.poki.io/game-cookies",{method:"post",body:JSON.stringify(e)}).catch(),[3,3];case 2:return n.sent(),[3,3];case 3:return[2]}}))}))},e.trackSavegames=function(){window.cookieStore&&window.cookieStore.getAll&&r.Z.gameID&&(Math.random()>.01||navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")<=-1||(e.collectAndLog(),setInterval(e.collectAndLog,12e4)))},e}()},459:(e,t,n)=>{n.d(t,{dF:()=>Ee,iz:()=>ye,FR:()=>we,Ii:()=>be,lW:()=>ke});var r=n(583),o=n(715),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},a=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};var s,c=(s=0,function(){return s+=1,"u".concat("0000".concat((Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)).concat(s)});function u(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t}function d(e,t){var n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function l(e,t){void 0===t&&(t={});var n,r,o,i=t.width||(r=d(n=e,"border-left-width"),o=d(n,"border-right-width"),n.clientWidth+r+o),a=t.height||function(e){var t=d(e,"border-top-width"),n=d(e,"border-bottom-width");return e.clientHeight+t+n}(e);return{width:i,height:a}}var p=16384;function f(e){return new Promise((function(t,n){var r=new Image;r.decode=function(){return t(r)},r.onload=function(){return t(r)},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e}))}function h(e){return i(this,void 0,void 0,(function(){return a(this,(function(t){return[2,Promise.resolve().then((function(){return(new XMLSerializer).serializeToString(e)})).then(encodeURIComponent).then((function(e){return"data:image/svg+xml;charset=utf-8,".concat(e)}))]}))}))}function v(e,t,n){return i(this,void 0,void 0,(function(){var r,o,i;return a(this,(function(a){return r="http://www.w3.org/2000/svg",o=document.createElementNS(r,"svg"),i=document.createElementNS(r,"foreignObject"),o.setAttribute("width","".concat(t)),o.setAttribute("height","".concat(n)),o.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),o.appendChild(i),i.appendChild(e),[2,h(o)]}))}))}var m=function(e,t){if(e instanceof t)return!0;var n=Object.getPrototypeOf(e);return null!==n&&(n.constructor.name===t.name||m(n,t))};function g(e,t,n){var r=".".concat(e,":").concat(t),o=n.cssText?function(e){var t=e.getPropertyValue("content");return"".concat(e.cssText," content: '").concat(t.replace(/'|"/g,""),"';")}(n):function(e){return u(e).map((function(t){var n=e.getPropertyValue(t),r=e.getPropertyPriority(t);return"".concat(t,": ").concat(n).concat(r?" !important":"",";")})).join(" ")}(n);return document.createTextNode("".concat(r,"{").concat(o,"}"))}function y(e,t,n){var r=window.getComputedStyle(e,n),o=r.getPropertyValue("content");if(""!==o&&"none"!==o){var i=c();try{t.className="".concat(t.className," ").concat(i)}catch(e){return}var a=document.createElement("style");a.appendChild(g(i,n,r)),t.appendChild(a)}}var w="application/font-woff",b="image/jpeg",k={woff:w,woff2:w,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:b,jpeg:b,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function S(e){var t=function(e){var t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}(e).toLowerCase();return k[t]||""}var T=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},A=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function E(e){return-1!==e.search(/^(data:)/)}function Z(e,t){return"data:".concat(t,";base64,").concat(e)}function x(e,t,n){return T(this,void 0,void 0,(function(){var r,o;return A(this,(function(i){switch(i.label){case 0:return[4,fetch(e,t)];case 1:if(404===(r=i.sent()).status)throw new Error('Resource "'.concat(r.url,'" not found'));return[4,r.blob()];case 2:return o=i.sent(),[2,new Promise((function(e,t){var i=new FileReader;i.onerror=t,i.onloadend=function(){try{e(n({res:r,result:i.result}))}catch(e){t(e)}},i.readAsDataURL(o)}))]}}))}))}var I={};function P(e,t,n){return T(this,void 0,void 0,(function(){var r,o,i,a,s;return A(this,(function(c){switch(c.label){case 0:if(r=function(e,t,n){var r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?"[".concat(t,"]").concat(r):r}(e,t,n.includeQueryParams),null!=I[r])return[2,I[r]];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime()),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,x(e,n.fetchRequestInit,(function(e){var n=e.res,r=e.result;return t||(t=n.headers.get("Content-Type")||""),function(e){return e.split(/,/)[1]}(r)}))];case 2:return i=c.sent(),o=Z(i,t),[3,4];case 3:return a=c.sent(),o=n.imagePlaceholder||"",s="Failed to fetch resource: ".concat(e),a&&(s="string"==typeof a?a:a.message),s&&console.warn(s),[3,4];case 4:return I[r]=o,[2,o]}}))}))}var _=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},C=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function R(e){return _(this,void 0,void 0,(function(){var t,n,r;return C(this,(function(o){switch(o.label){case 0:return"data:,"===(t=e.toDataURL())?[2,e.cloneNode(!1)]:e.getContext("2d")?[2,f(t)]:((n=document.createElement("canvas").getContext("2d",{alpha:!0})).canvas.width=e.width,n.canvas.height=e.height,r=n.getImageData(0,0,n.canvas.width,n.canvas.height),[4,new Promise((function(o){try{requestAnimationFrame((function(){var t=document.createElement("canvas").getContext("webgl"),i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGB,t.RGB,t.UNSIGNED_BYTE,e);var a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(r.data.buffer)),n.putImageData(r,0,0),t.deleteTexture(i),t.deleteFramebuffer(a);var s=t.getExtension("WEBGL_lose_context");s&&s.loseContext(),o(n.canvas.toDataURL())}))}catch(e){o(t)}}))]);case 1:return[2,f(o.sent())]}}))}))}function D(e,t){return _(this,void 0,void 0,(function(){var n,r,o,i;return C(this,(function(a){switch(a.label){case 0:return e.currentSrc?(n=document.createElement("canvas"),r=n.getContext("2d"),n.width=e.clientWidth,n.height=e.clientHeight,null==r||r.drawImage(e,0,0,n.width,n.height),[2,f(n.toDataURL())]):(o=e.poster,i=S(o),[4,P(o,i,t)]);case 1:return[2,f(a.sent())]}}))}))}function O(e){return _(this,void 0,void 0,(function(){var t;return C(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),(null===(t=null==e?void 0:e.contentDocument)||void 0===t?void 0:t.body)?[4,N(e.contentDocument.body,{},!0)]:[3,2];case 1:return[2,n.sent()];case 2:return[3,4];case 3:return n.sent(),[3,4];case 4:return[2,e.cloneNode(!1)]}}))}))}var M=function(e){return null!=e.tagName&&"SLOT"===e.tagName.toUpperCase()};function L(e,t){return m(t,Element)&&(function(e,t){var n=t.style;if(n){var r=window.getComputedStyle(e);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):u(r).forEach((function(o){var i=r.getPropertyValue(o);if("font-size"===o&&i.endsWith("px")){var a=Math.floor(parseFloat(i.substring(0,i.length-2)))-.1;i="".concat(a,"px")}m(e,HTMLIFrameElement)&&"display"===o&&"inline"===i&&(i="block"),"d"===o&&t.getAttribute("d")&&(i="path(".concat(t.getAttribute("d"),")")),n.setProperty(o,i,r.getPropertyPriority(o))}))}}(e,t),function(e,t){y(e,t,":before"),y(e,t,":after")}(e,t),function(e,t){m(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),m(e,HTMLInputElement)&&t.setAttribute("value",e.value)}(e,t),function(e,t){if(m(e,HTMLSelectElement)){var n=t,r=Array.from(n.children).find((function(t){return e.value===t.getAttribute("value")}));r&&r.setAttribute("selected","")}}(e,t)),t}function N(e,t,n){return _(this,void 0,void 0,(function(){return C(this,(function(r){return n||!t.filter||t.filter(e)?[2,Promise.resolve(e).then((function(e){return function(e,t){return _(this,void 0,void 0,(function(){return C(this,(function(n){return m(e,HTMLCanvasElement)?[2,R(e)]:m(e,HTMLVideoElement)?[2,D(e,t)]:m(e,HTMLIFrameElement)?[2,O(e)]:[2,e.cloneNode(!1)]}))}))}(e,t)})).then((function(n){return function(e,t,n){return _(this,void 0,void 0,(function(){var r,o,i;return C(this,(function(a){switch(a.label){case 0:return i=[],0===(i=M(e)&&e.assignedNodes?u(e.assignedNodes()):m(e,HTMLIFrameElement)&&(null===(r=e.contentDocument)||void 0===r?void 0:r.body)?u(e.contentDocument.body.childNodes):u((null!==(o=e.shadowRoot)&&void 0!==o?o:e).childNodes)).length||m(e,HTMLVideoElement)?[2,t]:[4,i.reduce((function(e,r){return e.then((function(){return N(r,n)})).then((function(e){e&&t.appendChild(e)}))}),Promise.resolve())];case 1:return a.sent(),[2,t]}}))}))}(e,n,t)})).then((function(t){return L(e,t)})).then((function(e){return function(e,t){return _(this,void 0,void 0,(function(){var n,r,o,i,a,s,c,u,d,l,p,f,h;return C(this,(function(v){switch(v.label){case 0:if(0===(n=e.querySelectorAll?e.querySelectorAll("use"):[]).length)return[2,e];r={},h=0,v.label=1;case 1:return h<n.length?(o=n[h],(i=o.getAttribute("xlink:href"))?(a=e.querySelector(i),s=document.querySelector(i),a||!s||r[i]?[3,3]:(c=r,u=i,[4,N(s,t,!0)])):[3,3]):[3,4];case 2:c[u]=v.sent(),v.label=3;case 3:return h++,[3,1];case 4:if((d=Object.values(r)).length){for(l="http://www.w3.org/1999/xhtml",(p=document.createElementNS(l,"svg")).setAttribute("xmlns",l),p.style.position="absolute",p.style.width="0",p.style.height="0",p.style.overflow="hidden",p.style.display="none",f=document.createElementNS(l,"defs"),p.appendChild(f),h=0;h<d.length;h++)f.appendChild(d[h]);e.appendChild(p)}return[2,e]}}))}))}(e,t)}))]:[2,null]}))}))}var G=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},V=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},j=/url\((['"]?)([^'"]+?)\1\)/g,B=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,q=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function F(e,t,n,r,o){return G(this,void 0,void 0,(function(){var i,a,s,c;return V(this,(function(u){switch(u.label){case 0:return u.trys.push([0,5,,6]),i=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;var n=document.implementation.createHTMLDocument(),r=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(o),t&&(r.href=t),o.href=e,o.href}(t,n):t,a=S(t),s=void 0,o?[4,o(i)]:[3,2];case 1:return c=u.sent(),s=Z(c,a),[3,4];case 2:return[4,P(i,a,r)];case 3:s=u.sent(),u.label=4;case 4:return[2,e.replace((d=t,l=d.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1"),new RegExp("(url\\(['\"]?)(".concat(l,")(['\"]?\\))"),"g")),"$1".concat(s,"$3"))];case 5:return u.sent(),[3,6];case 6:return[2,e]}var d,l}))}))}function U(e){return-1!==e.search(j)}function z(e,t,n){return G(this,void 0,void 0,(function(){var r,o;return V(this,(function(i){return U(e)?(r=function(e,t){var n=t.preferredFontFormat;return n?e.replace(q,(function(e){for(;;){var t=B.exec(e)||[],r=t[0],o=t[2];if(!o)return"";if(o===n)return"src: ".concat(r,";")}})):e}(e,n),o=function(e){var t=[];return e.replace(j,(function(e,n,r){return t.push(r),e})),t.filter((function(e){return!E(e)}))}(r),[2,o.reduce((function(e,r){return e.then((function(e){return F(e,r,t,n)}))}),Promise.resolve(r))]):[2,e]}))}))}var W=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},H=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function K(e,t,n){return W(this,void 0,void 0,(function(){var r,o,i;return H(this,(function(a){switch(a.label){case 0:return(o=null===(r=t.style)||void 0===r?void 0:r.getPropertyValue(e))?[4,z(o,null,n)]:[3,2];case 1:return i=a.sent(),t.style.setProperty(e,i,t.style.getPropertyPriority(e)),[2,!0];case 2:return[2,!1]}}))}))}function J(e,t){return W(this,void 0,void 0,(function(){return H(this,(function(n){switch(n.label){case 0:return[4,K("background",e,t)];case 1:return n.sent()?[3,3]:[4,K("background-image",e,t)];case 2:n.sent(),n.label=3;case 3:return[4,K("mask",e,t)];case 4:return n.sent()?[3,6]:[4,K("mask-image",e,t)];case 5:n.sent(),n.label=6;case 6:return[2]}}))}))}function $(e,t){return W(this,void 0,void 0,(function(){var n,r,o;return H(this,(function(i){switch(i.label){case 0:return(n=m(e,HTMLImageElement))&&!E(e.src)||m(e,SVGImageElement)&&!E(e.href.baseVal)?[4,P(r=n?e.src:e.href.baseVal,S(r),t)]:[2];case 1:return o=i.sent(),[4,new Promise((function(t,r){e.onload=t,e.onerror=r;var i=e;i.decode&&(i.decode=t),"lazy"===i.loading&&(i.loading="eager"),n?(e.srcset="",e.src=o):e.href.baseVal=o}))];case 2:return i.sent(),[2]}}))}))}function X(e,t){return W(this,void 0,void 0,(function(){var n,r;return H(this,(function(o){switch(o.label){case 0:return n=u(e.childNodes),r=n.map((function(e){return Q(e,t)})),[4,Promise.all(r).then((function(){return e}))];case 1:return o.sent(),[2]}}))}))}function Q(e,t){return W(this,void 0,void 0,(function(){return H(this,(function(n){switch(n.label){case 0:return m(e,Element)?[4,J(e,t)]:[3,4];case 1:return n.sent(),[4,$(e,t)];case 2:return n.sent(),[4,X(e,t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))}var Y=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ee=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},te={};function ne(e){return Y(this,void 0,void 0,(function(){var t,n;return ee(this,(function(r){switch(r.label){case 0:return null!=(t=te[e])?[2,t]:[4,fetch(e)];case 1:return[4,r.sent().text()];case 2:return n=r.sent(),t={url:e,cssText:n},te[e]=t,[2,t]}}))}))}function re(e,t){return Y(this,void 0,void 0,(function(){var n,r,o,i,a=this;return ee(this,(function(s){return n=e.cssText,r=/url\(["']?([^"')]+)["']?\)/g,o=n.match(/url\([^)]+\)/g)||[],i=o.map((function(o){return Y(a,void 0,void 0,(function(){var i;return ee(this,(function(a){return(i=o.replace(r,"$1")).startsWith("https://")||(i=new URL(i,e.url).href),[2,x(i,t.fetchRequestInit,(function(e){var t=e.result;return n=n.replace(o,"url(".concat(t,")")),[o,t]}))]}))}))})),[2,Promise.all(i).then((function(){return n}))]}))}))}function oe(e){if(null==e)return[];for(var t=[],n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,""),r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");;){if(null===(a=r.exec(n)))break;t.push(a[0])}n=n.replace(r,"");for(var o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");;){var a;if(null===(a=o.exec(n))){if(null===(a=i.exec(n)))break;o.lastIndex=i.lastIndex}else i.lastIndex=o.lastIndex;t.push(a[0])}return t}function ie(e,t){return Y(this,void 0,void 0,(function(){var n,r;return ee(this,(function(o){return n=[],r=[],e.forEach((function(n){if("cssRules"in n)try{u(n.cssRules||[]).forEach((function(e,o){if(e.type===CSSRule.IMPORT_RULE){var i=o+1,a=ne(e.href).then((function(e){return re(e,t)})).then((function(e){return oe(e).forEach((function(e){try{n.insertRule(e,e.startsWith("@import")?i+=1:n.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule:e,error:t})}}))})).catch((function(e){console.error("Error loading remote css",e.toString())}));r.push(a)}}))}catch(i){var o=e.find((function(e){return null==e.href}))||document.styleSheets[0];null!=n.href&&r.push(ne(n.href).then((function(e){return re(e,t)})).then((function(e){return oe(e).forEach((function(e){o.insertRule(e,o.cssRules.length)}))})).catch((function(e){console.error("Error loading remote stylesheet",e)}))),console.error("Error inlining remote css file",i)}})),[2,Promise.all(r).then((function(){return e.forEach((function(e){if("cssRules"in e)try{u(e.cssRules||[]).forEach((function(e){n.push(e)}))}catch(t){console.error("Error while reading CSS rules from ".concat(e.href),t)}})),n}))]}))}))}function ae(e){return e.filter((function(e){return e.type===CSSRule.FONT_FACE_RULE})).filter((function(e){return U(e.style.getPropertyValue("src"))}))}function se(e,t){return Y(this,void 0,void 0,(function(){return ee(this,(function(n){switch(n.label){case 0:if(null==e.ownerDocument)throw new Error("Provided element is not within a Document");return[4,ie(u(e.ownerDocument.styleSheets),t)];case 1:return[2,ae(n.sent())]}}))}))}function ce(e,t){return Y(this,void 0,void 0,(function(){var n;return ee(this,(function(r){switch(r.label){case 0:return[4,se(e,t)];case 1:return n=r.sent(),[4,Promise.all(n.map((function(e){var n=e.parentStyleSheet?e.parentStyleSheet.href:null;return z(e.cssText,n,t)})))];case 2:return[2,r.sent().join("\n")]}}))}))}function ue(e,t){return Y(this,void 0,void 0,(function(){var n,r,o,i,a;return ee(this,(function(s){switch(s.label){case 0:return null==t.fontEmbedCSS?[3,1]:(r=t.fontEmbedCSS,[3,5]);case 1:return t.skipFonts?(o=null,[3,4]):[3,2];case 2:return[4,ce(e,t)];case 3:o=s.sent(),s.label=4;case 4:r=o,s.label=5;case 5:return(n=r)&&(i=document.createElement("style"),a=document.createTextNode(n),i.appendChild(a),e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i)),[2]}}))}))}var de=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},le=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function pe(e,t){return void 0===t&&(t={}),de(this,void 0,void 0,(function(){var n,r,o,i;return le(this,(function(a){switch(a.label){case 0:return n=l(e,t),r=n.width,o=n.height,[4,N(e,t,!0)];case 1:return[4,ue(i=a.sent(),t)];case 2:return a.sent(),[4,Q(i,t)];case 3:return a.sent(),function(e,t){var n=e.style;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width="".concat(t.width,"px")),t.height&&(n.height="".concat(t.height,"px"));var r=t.style;null!=r&&Object.keys(r).forEach((function(e){n[e]=r[e]}))}(i,t),[4,v(i,r,o)];case 4:return[2,a.sent()]}}))}))}function fe(e,t){return void 0===t&&(t={}),de(this,void 0,void 0,(function(){var n,r,o,i,a,s,c,u,d;return le(this,(function(h){switch(h.label){case 0:return n=l(e,t),r=n.width,o=n.height,[4,pe(e,t)];case 1:return[4,f(h.sent())];case 2:return i=h.sent(),a=document.createElement("canvas"),s=a.getContext("2d"),c=t.pixelRatio||function(){var e,t;try{t=process}catch(e){}var n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}(),u=t.canvasWidth||r,d=t.canvasHeight||o,a.width=u*c,a.height=d*c,t.skipAutoScale||function(e){(e.width>p||e.height>p)&&(e.width>p&&e.height>p?e.width>e.height?(e.height*=p/e.width,e.width=p):(e.width*=p/e.height,e.height=p):e.width>p?(e.height*=p/e.width,e.width=p):(e.width*=p/e.height,e.height=p))}(a),a.style.width="".concat(u),a.style.height="".concat(d),t.backgroundColor&&(s.fillStyle=t.backgroundColor,s.fillRect(0,0,a.width,a.height)),s.drawImage(i,0,0,a.width,a.height),[2,a]}}))}))}function he(e,t){return void 0===t&&(t={}),de(this,void 0,void 0,(function(){return le(this,(function(n){switch(n.label){case 0:return[4,fe(e,t)];case 1:return[2,n.sent().toDataURL()]}}))}))}var ve=n(801),me=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ge=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},ye=function(e){return void 0===e&&(e=null),me(void 0,void 0,void 0,(function(){var t;return ge(this,(function(n){switch(n.label){case 0:return[4,Ae()];case 1:return(t=n.sent())&&t.length>10?e?[4,Se(t,e)]:[3,3]:[3,5];case 2:t=n.sent(),n.label=3;case 3:return[4,ke({screenshot:t})];case 4:return[2,n.sent()];case 5:return[2,null]}}))}))},we=function(e){return me(void 0,void 0,void 0,(function(){var t,n,i,a,s;return ge(this,(function(c){switch(c.label){case 0:return t=e.hasFrame,n=null,t?(i=e.title,a=e.thumbnail,[4,ye({title:i,thumbnail:a})]):[3,2];case 1:return n=c.sent(),[3,4];case 2:return[4,ye()];case 3:n=c.sent(),c.label=4;case 4:return s={screenshot:n,errors:(0,ve.FU)()},e.callback&&(s.callback=e.callback),o.Z.sendMessage(r.Z.message.sendGameScreenshot,{data:s}),[2]}}))}))},be=function(){return me(void 0,void 0,void 0,(function(){var e;return ge(this,(function(t){switch(t.label){case 0:return[4,Ae()];case 1:return e=t.sent(),o.Z.sendMessage(r.Z.message.sendGameRawScreenshot,{data:{screenshot:e}}),[2]}}))}))},ke=function(e){return me(void 0,void 0,void 0,(function(){var t,n,r,o;return ge(this,(function(i){switch(i.label){case 0:return t=e.screenshot,"https://api.poki.io/screenshot",n="https://poki-user-content.com/",[4,fetch("https://api.poki.io/screenshot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:t})})];case 1:r=i.sent(),i.label=2;case 2:return i.trys.push([2,5,,6]),200!==r.status?[3,4]:[4,r.json()];case 3:return o=i.sent(),[2,n+o.source];case 4:return[3,6];case 5:return i.sent(),[3,6];case 6:return[2,null]}}))}))},Se=function(e,t){return me(void 0,void 0,void 0,(function(){var n,r,o,i,a,s,c,u,d,l,p,f,h,v,m,g,y,w,b,k,S,T,A;return ge(this,(function(E){switch(E.label){case 0:return n=t.title,r=t.thumbnail,(o=new Image).crossOrigin="Anonymous",i=new Promise((function(e){o.onload=function(){return e(o)}})),o.src=e,(a=new Image).crossOrigin="Anonymous",s=new Promise((function(e){a.onload=function(){return e(a)}})),a.src="https://a.poki.com/images/screenshot-frame.png",(c=new Image).crossOrigin="Anonymous",u=new Promise((function(e){c.onload=function(){return e(c)}})),128,c.src="https://img.poki.com/cdn-cgi/image/quality=78,width=".concat(128,",height=").concat(128,",fit=cover,f=auto/").concat(r),d=new FontFace("TorusBold","url(https://a.poki.com/fonts/torus-bold-latin.woff2)"),l=d.load(),[4,Promise.all([i,s,u,l])];case 1:return p=E.sent(),f=p[0],h=p[1],v=p[2],m=p[3],(g=document.createElement("canvas")).width=f.width,g.height=f.height,(y=g.getContext("2d")).drawImage(f,0,0),w=g.width/h.width,b=h.height*w,k=g.height-b,y.drawImage(h,0,k,g.width,b),S=v.height*w,Te(y,v,64*w,k+20*w,S,S,24*w),document.fonts.add(m),T=226*w,A=k+68*w,y.textAlign="left",y.textBaseline="top",y.fillStyle="#002b50",y.font="700 ".concat(56*w,"px TorusBold,sans-serif"),y.fillText(n,T,A),[2,g.toDataURL()]}}))}))},Te=function(e,t,n,r,o,i,a){e.save(),e.beginPath();var s=n+o,c=r+i;e.moveTo(n+a,r),e.lineTo(s-a,r),e.quadraticCurveTo(s,r,s,r+a),e.lineTo(s,c-a),e.quadraticCurveTo(s,c,s-a,c),e.lineTo(n+a,c),e.quadraticCurveTo(n,c,n,c-a),e.lineTo(n,r+a),e.quadraticCurveTo(n,r,n+a,r),e.closePath(),e.clip(),e.drawImage(t,n,r,o,i),e.restore()},Ae=function(){return me(void 0,void 0,void 0,(function(){var e,t,n,r,o;return ge(this,(function(i){switch(i.label){case 0:return e=function(e){return!["VIDEO","TEXTAREA","NOSCRIPT","INPUT","IFRAME"].includes(e.nodeName)&&!("IMG"===e.nodeName&&!e.getAttribute("src"))},t=document.body.style.minWidth,n=document.body.style.minHeight,document.body.style.minWidth="100%",document.body.style.minHeight="100%",[4,he(document.body,{quality:.95,filter:e})];case 1:return(r=i.sent())&&r.length<10?(o=document.body.style.position,document.body.style.position="fixed",[4,he(document.body,{quality:.95,filter:e})]):[3,3];case 2:r=i.sent(),document.body.style.position=o,i.label=3;case 3:return document.body.style.minWidth=t,document.body.style.minHeight=n,[2,r]}}))}))},Ee=function(e){return me(void 0,void 0,void 0,(function(){var t,n,r,o,i;return ge(this,(function(a){switch(a.label){case 0:e=e||function(e){return!["VIDEO","TEXTAREA","NOSCRIPT","INPUT","IFRAME","CANVAS"].includes(e.nodeName)&&!("IMG"===e.nodeName&&!e.getAttribute("src"))},t=document.body.style.minWidth,n=document.body.style.minHeight,r=document.body.style.backgroundColor,document.body.style.minWidth="100%",document.body.style.minHeight="100%",document.body.style.backgroundColor="transparent",a.label=1;case 1:return a.trys.push([1,3,,4]),[4,pe(document.body,{quality:.95,filter:e})];case 2:return o=a.sent(),[3,4];case 3:return i=a.sent(),console.error(i),[3,4];case 4:return document.body.style.minWidth=t,document.body.style.minHeight=n,document.body.style.backgroundColor=r,[2,o]}}))}))}},453:(e,t,n)=>{function r(e){var t=new RegExp("".concat(e,"=([^;]+)(?:;|$)")).exec(document.cookie);return t?t[1]:""}function o(e,t,n){document.cookie="".concat(e,"=").concat(t,"; path=/; samesite=lax; max-age=").concat(Math.min(n||15552e3,15552e3))}function i(){for(var e=Math.floor(Date.now()/1e3),t="",n=0;n<4;n++)t=String.fromCharCode(255&e)+t,e>>=8;if(window.crypto&&crypto.getRandomValues&&Uint32Array){var r=new Uint32Array(12);crypto.getRandomValues(r);for(var o=0;o<12;o++)t+=String.fromCharCode(255&r[o])}else for(var i=0;i<12;i++)t+=String.fromCharCode(Math.floor(256*Math.random()));return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}n.d(t,{Z:()=>Z});function a(e,t,n){console.error(e);var r=[{k:"where",v:t},{k:"error",v:e.name&&e.message?"".concat(e.name,": ").concat(e.message):JSON.stringify(e)}];if(void 0!==n){var o=n;"string"!=typeof e&&(o=JSON.stringify(e)),r.push({k:"extra",v:o})}!function(e,t){if(navigator.sendBeacon){var n=navigator.sendBeacon.bind(navigator);try{if(n(e,t))return}catch(e){console.error(e)}}try{var r="XMLHttpRequest"in window?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");r.open("POST",e,!0),r.setRequestHeader("Content-Type","text/plain"),r.send(t)}catch(e){}}("https://t.poki.io/l",JSON.stringify({c:"observer-error",ve:7,d:r}))}window._pokiUserGlobalName=window._pokiUserGlobalName||"user";var s="poki_session";function c(e){return!(!e||!(e&&e.page&&e.landing_page&&e.previous_page)||!e.tab_id||!e.expire||Date.now()>e.expire||e.expire>Date.now()+18e5)}function u(){var e=null;c(window[window._pokiSessionGlobalName])&&(e=window[window._pokiSessionGlobalName]);try{var t=JSON.parse(sessionStorage.getItem(s));c(t)&&(!e||t.depth>e.depth)&&(e=t)}catch(e){try{a(e,"getTabSession",sessionStorage.getItem(s))}catch(t){a(e,"getTabSession",t)}}return e}function d(){var e=u();return e?e.tab_id:i()}function l(){var e=0,t=u();t&&(e=t.depth);try{var n=JSON.parse(r(s)||null);c(n)&&(e=Math.max(e,n.depth))}catch(e){var o=null;try{o=r(s)||null}catch(e){}a(e,"getSessionDepth",o)}return e}function p(){try{var e=r("ses_cnt");return e&&parseInt(e,10)||0}catch(e){return 0}}window._pokiSessionGlobalName=window._pokiSessionGlobalName||"session";var f=n(583),h=n(715),v=n(298),m=function(e){var t=new Array;return Object.keys(e).forEach((function(n){"object"==typeof e[n]?t=t.concat(m(e[n])):t.push(e[n])})),t};const g=m;var y=n(902),w=n(699),b=n(888),k=n(58),S=function(){return S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},S.apply(this,arguments)},T=g(f.Z.tracking),A=window,E=function(){function e(){}return e.track=function(t,n){var r,o;if(void 0===n&&(n={}),-1===T.indexOf(t))throw new TypeError("Invalid 'event', must be one of ".concat(T.join(", ")));if("object"!=typeof n)throw new TypeError("Invalid data, must be an object");var i=k.Z.getVideoDataAnnotations();if(null==i?void 0:i.pokiAdServer)switch(t){case f.Z.tracking.ads.status.impression:(0,y.Z)(S(S({},n),{event:"video-impression",creativeId:null==n?void 0:n.creativeId}));break;case f.Z.tracking.ads.video.error:(0,y.Z)(S(S({},n),{event:"video-error",errorCode:null==n?void 0:n.errorCode}));break;case f.Z.tracking.ads.video.loaderError:(0,y.Z)(S(S({},n),{event:"video-adsloader-error",errorCode:null==n?void 0:n.errorCode}));break;case f.Z.tracking.ads.status.completed:(0,y.Z)(S(S({},n),{event:"video-complete"}))}if(t.includes("pokiTrackingRewardedWeb")&&(n=i),v.Z.log){if("test"===(null===(o=null===(r=null===window||void 0===window?void 0:window.process)||void 0===r?void 0:r.env)||void 0===o?void 0:o.NODE_ENV))return;Object.keys(n).length?console.info("%cPOKI_TRACKER:%c Tracked event '".concat(t,"' with data:"),"font-weight: bold","",n):console.info("%cPOKI_TRACKER:%c Tracked event '".concat(t,"'"),"font-weight: bold","")}e.playtestMessageCallback({event:t,data:n}),e.logToObserver?e.pushEvent("sdk","message",{content:{event:t,data:n,pokifordevs:{game_id:b.Z.gameID,game_version_id:void 0}},type:f.Z.message.event,origin:"game"}):h.Z.sendMessage(f.Z.message.event,{event:t,data:n})},e.setMessageCallback=function(t){e.playtestMessageCallback=t},e.setupDefaultEvents=function(){var t,n=((t={})[f.Z.ready]=f.Z.tracking.sdk.status.initialized,t[f.Z.adblocked]=f.Z.tracking.sdk.status.failed,t[f.Z.ads.busy]=f.Z.tracking.ads.status.busy,t[f.Z.ads.completed]=f.Z.tracking.ads.status.completed,t[f.Z.ads.error]=f.Z.tracking.ads.status.error,t[f.Z.ads.impression]=f.Z.tracking.ads.status.impression,t[f.Z.ads.limit]=f.Z.tracking.ads.status.limit,t[f.Z.ads.ready]=f.Z.tracking.ads.status.ready,t[f.Z.ads.requested]=f.Z.tracking.ads.status.requested,t[f.Z.ads.prebidRequested]=f.Z.tracking.ads.status.prebidRequested,t[f.Z.ads.skipped]=f.Z.tracking.ads.status.skipped,t[f.Z.ads.started]=f.Z.tracking.ads.status.started,t[f.Z.ads.video.clicked]=f.Z.tracking.ads.video.clicked,t[f.Z.ads.video.error]=f.Z.tracking.ads.video.error,t[f.Z.ads.video.loaderError]=f.Z.tracking.ads.video.loaderError,t[f.Z.ads.video.buffering]=f.Z.tracking.ads.status.buffering,t[f.Z.ads.video.progress]=f.Z.tracking.ads.video.progress,t[f.Z.ads.video.paused]=f.Z.tracking.ads.video.paused,t[f.Z.ads.video.resumed]=f.Z.tracking.ads.video.resumed,t[f.Z.tracking.screen.gameplayStart]=f.Z.tracking.screen.gameplayStart,t[f.Z.tracking.screen.gameplayStop]=f.Z.tracking.screen.gameplayStop,t[f.Z.tracking.screen.commercialBreak]=f.Z.tracking.screen.commercialBreak,t[f.Z.tracking.screen.rewardedBreak]=f.Z.tracking.screen.rewardedBreak,t);Object.keys(n).forEach((function(t){k.Z.addEventListener(t,(function(r){e.track(n[t],r)}))}))},e.pushEvent=function(e,t,n){A.pokiGTM.push({event:"".concat(e,"-").concat(t),eventNoun:e,eventVerb:t,eventData:n||{}})},e.setRequireConsent=function(t){e.cmpRequired=t,e.setupObserverIfCMP()},e.setupObserverWithCMP=function(t){e.cmpIndex=t,e.setupObserverIfCMP()},e.setupObserverIfCMP=function(){if(void 0!==e.cmpRequired&&void 0!==e.cmpIndex)if(e.cmpRequired){if(!window.__tcfapi)return void console.error("POKI-SDK: enableEventTracking: a CMP is required but no CMP is present.");window.__tcfapi("addEventListener",2,(function(t,n){!n||"tcloaded"!==t.eventStatus&&"useractioncomplete"!==t.eventStatus||(window.__tcfapi("getNonIABVendorConsents",2,(function(t){t&&t.nonIabVendorConsents&&t.nonIabVendorConsents[e.cmpIndex||0]&&e.setupObserver()})),window.__tcfapi("removeEventListener",2,(function(){}),t.listenerId))}))}else e.setupObserver()},e.setupObserver=function(){A._pokiSessionGlobalName="pokiSession",A._pokiUserGlobalName="pokiUser",A._pokiContextGlobalName="pokiContext",A._pokiTrackerGlobalName="pokiTracker",function(e,t,n){var f=null;try{c(f=u())?(f.previous_page.path=f.page.path,f.previous_page.type=f.page.type,f.previous_page.id=f.page.id,f.previous_page.start=f.page.start,f.previous_page.pageview_id=f.page.pageview_id,f.page.path=e,f.page.type=t,f.page.id=n,f.page.start=Date.now(),f.page.pageview_id=i(),f.depth=l()+1,f.expire=Date.now()+18e5):f=function(e,t,n){try{var u=JSON.parse(r(s)||null);if(c(u))return u.previous_page.path=u.page.path,u.previous_page.type=u.page.type,u.previous_page.id=u.page.id,u.previous_page.start=u.page.start,u.previous_page.pageview_id=u.page.pageview_id,u.page.path=e,u.page.type=t,u.page.id=n,u.page.start=Date.now(),u.page.pageview_id=i(),u.depth=l()+1,u.expire=Date.now()+18e5,u.tab_id=d(),o(s,JSON.stringify(u)),u}catch(e){var f=null;try{f=r(s)||null}catch(e){}a(e,"getSessionDepth",f)}var h=i();return{id:i(),expire:Date.now()+18e5,tab_id:d(),depth:1,count:p()+1,page:{path:e,type:t,id:n,start:Date.now(),pageview_id:h},previous_page:{},landing_page:{path:e,type:t,id:n,start:Date.now(),pageview_id:h}}}(e,t,n);try{o("ses_cnt",f.count)}catch(e){a(e,"updateSession-3")}f.count>1&&function(){try{o("uid_new","0"),sessionStorage.setItem("uid_new","0")}catch(e){}window[window._pokiUserGlobalName]&&(window[window._pokiUserGlobalName].is_new=!1)}();var h=JSON.stringify(f);try{sessionStorage.setItem(s,h)}catch(e){a(e,"updateSession-1")}window[window._pokiSessionGlobalName]=f;try{o(s,h)}catch(e){a(e,"updateSession-4")}}catch(e){a(e,"updateSession-2")}}(window.location.pathname,"external",b.Z.contentGameID),function(){var e,t,n=null===(e=window[window._pokiUserGlobalName])||void 0===e?void 0:e.id,a=(null===(t=window[window._pokiUserGlobalName])||void 0===t?void 0:t.is_new)||!1;if(!n)try{n=sessionStorage.getItem("uid"),a="1"===sessionStorage.getItem("uid_new")}catch(e){}n||(n=r("uid"),a="1"===r("uid_new")),n||(n=i(),a=!0),o("uid",n),o("uid_new",a?"1":"0");try{sessionStorage.setItem("uid",n),sessionStorage.setItem("uid_new",a?"1":"0")}catch(e){}window[window._pokiUserGlobalName]={id:n,is_new:a}}(),A[A._pokiContextGlobalName]={tag:null,site:{id:null,domain:window.location.hostname,prefix:""},page:{id:b.Z.contentGameID,type:"external",path:window.location.pathname,pageview_id:i()},user:A[A._pokiUserGlobalName],session:A[A._pokiSessionGlobalName]},A.pokiGTM=A.pokiGTM||[],(0,w.Z)("https://a.poki.com/t2.js"),e.logToObserver=!0},e.logToObserver=!1,e.cmpRequired=void 0,e.cmpIndex=void 0,e.playtestMessageCallback=function(){},e}();const Z=E},662:(e,t,n)=>{n.d(t,{M:()=>o});var r=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","GB","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","IS","LI","NO"];function o(e){return r.includes(e)}},298:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(888);const o=function(){function e(){}return e.debug=!1,e.log=!1,e.init=function(t,n){var o,i,a=window.location.hostname;void 0===t&&("test"===(null===(i=null===(o=null===window||void 0===window?void 0:window.process)||void 0===o?void 0:o.env)||void 0===i?void 0:i.NODE_ENV)?(t=!1,void 0===n&&(n=!1)):"localhost"===a||"127.0.0.1"===a||"[::1]"===a?(t=!0,void 0===n&&(n=!1)):(t=!1,void 0===n&&(n=!1))),r.Z.isInspector||"qa-files.poki.com"===a?(t=!0,n=!0):a.endsWith(".poki-gdn.com")&&(t=!1,n=!1),r.Z.debugMode&&(t=!0),r.Z.logMode&&(n=!0),void 0===n&&(n=t),e.debug=t,e.log=n},e}()},272:(e,t,n)=>{n.d(t,{V:()=>o});function r(e){return Math.round(100*e)/100}var o=function(){function e(e){var t=this;this.seconds=[],this.frameCounter=0,Math.random()>e||window.requestAnimationFrame&&-1!==window.requestAnimationFrame.toString().indexOf("[native code]")&&(this.nextSecond=performance.now()+1e3,window.requestAnimationFrame((function(){t.frame()})))}return e.prototype.frame=function(){for(var e=this,t=performance.now();t>=this.nextSecond;)this.seconds.unshift(this.frameCounter),this.seconds.length>10&&this.seconds.pop(),this.frameCounter=0,this.nextSecond+=1e3;this.frameCounter++,window.requestAnimationFrame((function(){e.frame()}))},e.prototype.stats=function(){var e=this;if(0!==this.seconds.length){var t=Math.min.apply(Math,this.seconds),n=Math.max.apply(Math,this.seconds),o=r(this.seconds.reduce((function(e,t){return e+t}),0)/this.seconds.length),i=r(this.seconds.slice(1).map((function(t,n){return Math.abs(t-e.seconds[n])})).reduce((function(e,t){return e+t}),0)/(this.seconds.length-1));return isNaN(i)&&(i=0),"".concat(t,"|").concat(n,"|").concat(o,"|").concat(i)}},e}()},687:(e,t,n)=>{n.d(t,{Z:()=>r});const r=function(){for(var e=Math.floor(Date.now()/1e3),t="",n=0;n<4;n++)t=String.fromCharCode(255&e)+t,e>>=8;if(window.crypto&&crypto.getRandomValues&&Uint32Array){var r=new Uint32Array(12);crypto.getRandomValues(r);for(n=0;n<12;n++)t+=String.fromCharCode(255&r[n])}else for(n=0;n<12;n++)t+=String.fromCharCode(Math.floor(256*Math.random()));return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}},906:(e,t,n)=>{n.d(t,{Z:()=>r});const r=function(e,t){var n;if("undefined"==typeof window&&!t)return"";e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("(?:[\\?&]|^)".concat(e,"=([^&#]*)")).exec(t||(null===(n=null===window||void 0===window?void 0:window.location)||void 0===n?void 0:n.search)||"");return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))}},893:(e,t,n)=>{n.d(t,{Z:()=>r});const r=function(){return"undefined"!=typeof navigator&&/(?:phone|windows\s+phone|ipod|blackberry|(?:android|bb\d+|meego|silk|googlebot) .+? mobile|palm|windows\s+ce|opera\smini|avantgo|mobilesafari|docomo)/i.test(navigator.userAgent)}},573:(e,t,n)=>{n.d(t,{Z:()=>r});const r=function(){return"undefined"!=typeof navigator&&/(?:ipad|playbook|(?:android|bb\d+|meego|silk)(?! .+? mobile))/i.test(navigator.userAgent)}},699:(e,t,n)=>{n.d(t,{Z:()=>r});const r=function(e){return new Promise((function(t,n){var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=e;var o=function(){r.readyState&&"loaded"!==r.readyState&&"complete"!==r.readyState||(t(),r.onload=null,r.onreadystatechange=null)};r.onload=o,r.onreadystatechange=o,r.onerror=n,document.head.appendChild(r)}))}},801:(e,t,n)=>{function r(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}n.d(t,{lF:()=>k,MT:()=>b,ZB:()=>h,FU:()=>m,$r:()=>g,eK:()=>v});var o,i,a,s,c=n(888),u=[],d=(o=100,i=!1,a=0,function(e){if(i)a++;else{i=!0,setTimeout((function(){i=!1}),o);var t=a;a=0,e(t)}}),l=console.error,p=["Audio callback had starved sending audio by"],f=!1,h=Math.random().toString(36).substr(2,9);function v(e){s=e}function m(){return u}function g(e,t){void 0===t&&(t=!0),c.Z.gameID&&!c.Z.isPlayground?d((function(t){try{var n=e.message||JSON.stringify(e);u.push({n:e.name,m:n,s:JSON.stringify(e.stack)}),s&&s({name:e.name,message:n,stack:e.stack});var r=JSON.stringify({gid:c.Z.gameID,vid:c.Z.versionID,ve:7,n:e.name,m:n+(t?" (skipped ".concat(t," errors)"):""),s:JSON.stringify(e.stack),ui:h}),o="https://t.poki.io/ge";if(navigator.sendBeacon)navigator.sendBeacon(o,r);else{var i=new XMLHttpRequest;i.open("POST",o,!0),i.send(r)}}catch(e){console.error(e)}})):t&&console.log(e)}function y(e){r(e.reason)?g(e.reason):g({name:"unhandledrejection",message:JSON.stringify(e.reason)||JSON.stringify(e)})}function w(e){r(e.error)?g(e.error):g(e)}function b(){if(!f){f=!0,window.addEventListener("unhandledrejection",y),window.addEventListener("error",w);try{console.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=JSON.stringify(e);p.some((function(e){return n.includes(e)}))||g({name:"console.error",message:n},!1),l.apply(console,e)}}catch(e){}}}function k(){if(f){f=!1,window.removeEventListener("unhandledrejection",y),window.removeEventListener("error",w);try{console.error=l}catch(e){}}}"undefined"==typeof window||c.Z.isPlayground||b()},902:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(298),o=n(888),i=n(58),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};const s=function(e){var t;if("undefined"!=typeof window&&"undefined"!=typeof fetch){var n=i.Z.getVideoDataAnnotations(),s=e.size;(null===(t=e.event)||void 0===t?void 0:t.startsWith("video-"))&&(s="640x360v");var c=a(a({},e),{size:s,opportunity_id:e.opportunityId||n.opportunityId,ad_unit_path:e.adUnitPath||n.adUnitPath,p4d_game_id:o.Z.gameID,p4d_version_id:o.Z.versionID,bidder:e.bidder||n.bidder,bid:e.bid||n.bid||0,error_code:e.errorCode,creative_id:e.creativeId||n.creativeId,experiment:o.Z.experiment});r.Z.debug?console.log("PokiAdServer Tracking: ",c):fetch("https://t.poki.io/adserver",{method:"POST",mode:"no-cors",body:JSON.stringify(c)})}}},888:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(662),o=n(906),i=n(893),a=n(573);var s,c,u=(0,o.Z)("url_referrer")||"",d={bot:"1"===(0,o.Z)("bot"),categories:(0,o.Z)("categories")||"",device:(0,i.Z)()?"mobile":(0,a.Z)()?"tablet":"desktop",experiment:(0,o.Z)("experiment")||"",forceAd:(0,o.Z)("force_ad")||!1,isPokiIframe:(parseInt((0,o.Z)("site_id"),10)||0)>0,siteID:parseInt((0,o.Z)("site_id"),10)||3,tag:(0,o.Z)("tag")||"",versionID:(0,o.Z)("game_version_id"),debugMode:"true"===(0,o.Z)("pokiDebug"),logMode:""!==(0,o.Z)("pokiLogging"),playtest:(0,o.Z)("playtest"),testVideos:"true"===(0,o.Z)("testVideos"),referrer:u,isPlayground:!!window.isPokiPlayground,isInspector:"inspector-uploads.poki-user-content.com"===(null===(s=null===window||void 0===window?void 0:window.location)||void 0===s?void 0:s.host)||(null===(c=null===document||void 0===document?void 0:document.referrer)||void 0===c?void 0:c.includes("inspector.poki.dev"))||"1"===(0,o.Z)("inspector"),ccpaApplies:(0,o.Z)("ccpaApplies"),country:((0,o.Z)("country")||"").toUpperCase(),gameID:(0,o.Z)("game_id"),gdprApplies:(0,r.M)(((0,o.Z)("country")||"").toUpperCase()),contentGameID:void 0,specialCondition:(0,o.Z)("special_condition"),iabcat:void 0,nonPersonalized:"y"===(0,o.Z)("nonPersonalized"),familyFriendly:"y"===(0,o.Z)("familyFriendly")};const l=d},992:(e,t,n)=>{n.d(t,{Z:()=>r});const r=function(e,t){var n=!1;return Object.keys(t).forEach((function(r){t[r]===e&&(n=!0)})),n}}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return o[e].call(n.exports,n,n.exports,a),n.exports}a.m=o,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);a.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,a.d(o,i),o},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>e+".js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="@poki/poki-sdk:",a.l=(e,t,o,i)=>{if(n[e])n[e].push(t);else{var s,c;if(void 0!==o)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var l=u[d];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==r+o){s=l;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",r+o),s.src=e),n[e]=[t];var p=(t,r)=>{s.onerror=s.onload=null,clearTimeout(f);var o=n[e];if(delete n[e],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(r))),t)return t(r)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),c&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!e;)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={453:0};a.f.j=(t,n)=>{var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,o)=>r=e[t]=[n,o]));n.push(r[2]=o);var i=a.p+a.u(t),s=new Error;a.l(i,(n=>{if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,r[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,o,[i,s,c]=n,u=0;if(i.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)c(a)}for(t&&t(n);u<i.length;u++)o=i[u],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunk_poki_poki_sdk=self.webpackChunk_poki_poki_sdk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{var e=a(95),t=a(583),n=a(715),r=a(687),o=21682198607;const i={adTagUrl:"//pubads.g.doubleclick.net/gampad/ads?sz=640x360|640x480&iu=/1053551/Pub-Poki-Generic&ciu_szs&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url={url}&description_url={descriptionUrl}&correlator={timestamp}&nofb=1",adTiming:{preroll:!1,timeBetweenAds:12e4,timePerTry:7e3,startAdsAfter:12e4},waterfallRetries:2};var s=a(298),c=a(888);function u(e){var t="/".concat(o,"/debug-display/debug-display-").concat(e);return s.Z.debug||(t=c.Z.isPokiIframe?"/".concat(o,"/").concat(c.Z.device,"_ingame_").concat(e,"/").concat(c.Z.siteID,"_").concat(c.Z.device,"_ingame_").concat(e):"/".concat(o,"/external_").concat(c.Z.device,"_display_ingame/external_").concat(c.Z.device,"_ingame_").concat(e)),t}var d=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};const p=function(){var e=window.location.pathname;"/"!==e[0]&&(e="/".concat(e));var t=encodeURIComponent("".concat(window.location.protocol,"//").concat(window.location.host).concat(e).concat(window.location.search)),n=encodeURIComponent(document.referrer),r="https://devs-api.poki.com/gameinfo/@sdk?href=".concat(t,"&referrer=").concat(n);return fetch(r,{method:"GET",headers:{"Content-Type":"text/plain"}}).then((function(e){return d(void 0,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return e.status>=200&&e.status<400?[4,e.json()]:[3,2];case 1:return(t=n.sent()).game_id?[2,{gameID:t.game_id,gameTitle:t.game_name,playtestLobbyID:t.playtest_lobby_id,playtestRecord:t.playtest_record,cachedContentGameID:t.cached_content_game_id,specialConditions:t.ad_settings.special_conditions,adTiming:{preroll:t.ad_settings.preroll,timePerTry:t.ad_settings.time_per_try,timeBetweenAds:t.ad_settings.time_between_ads,startAdsAfter:t.ad_settings.start_ads_after}}]:[2,void 0];case 2:throw e}}))}))})).catch((function(e){return function(e){return d(this,void 0,void 0,(function(){var t,n,r,o,i,a,s,c,u,d,p,f;return l(this,(function(l){switch(l.label){case 0:console.error(e),l.label=1;case 1:return l.trys.push([1,4,,5]),"/"!==(t=window.location.pathname)[0]&&(t="/".concat(t)),o=(r=JSON).stringify,d={c:"sdk-p4d-error",ve:7},p={k:"error"},a=(i=JSON).stringify,f={status:e.status},(s=e.json)?[4,e.json()]:[3,3];case 2:s=l.sent(),l.label=3;case 3:if(n=o.apply(r,[(d.d=[(p.v=a.apply(i,[(f.json=s,f.body=JSON.stringify({href:"".concat(window.location.protocol,"//").concat(window.location.host).concat(t).concat(window.location.search)}),f.name=e.name,f.message=e.message,f)]),p)],d)]),c="https://t.poki.io/l",navigator.sendBeacon)navigator.sendBeacon(c,n);else try{(u=new XMLHttpRequest).open("POST",c,!0),u.send(n)}catch(e){}return[3,5];case 4:return l.sent(),[3,5];case 5:return[2]}}))}))}(e)}))};const f=function(e){return e instanceof Array?e:[e]};var h=a(58);const v=function(){function e(e){void 0===e&&(e={}),this.setTimings(e),this.timingIdx={timePerTry:0},this.timers={timePerTry:void 0,timeBetweenAds:void 0,startAdsAfter:void 0},(null==e?void 0:e.fake)||(h.Z.addEventListener(t.Z.ads.requested,this.startTimeBetweenAdsTimer.bind(this)),h.Z.addEventListener(t.Z.ads.completed,this.startTimeBetweenAdsTimer.bind(this)),h.Z.addEventListener(t.Z.ads.stopped,this.startTimeBetweenAdsTimer.bind(this)))}return e.prototype.setTimings=function(e){var t=i.adTiming,n=e.preroll,r=void 0===n?t.preroll:n,o=e.timePerTry,a=void 0===o?t.timePerTry:o,s=e.timeBetweenAds,c=void 0===s?t.timeBetweenAds:s,u=e.startAdsAfter,d=void 0===u?t.startAdsAfter:u;this.timings={preroll:!1!==r,timePerTry:f(a),timeBetweenAds:c,startAdsAfter:d}},e.prototype.resetAll=function(){this.timingIdx={timePerTry:0},this.stopTimer("timePerTry"),this.stopTimer("timeBetweenAds"),this.stopTimer("startAdsAfter")},e.prototype.startTimeBetweenAdsTimer=function(){this.startTimer("timeBetweenAds")},e.prototype.startStartAdsAfterTimer=function(){this.startTimer("startAdsAfter")},e.prototype.requestPossible=function(){return!this.timers.timeBetweenAds&&!this.timers.startAdsAfter},e.prototype.startWaterfallTimer=function(e){this.startTimer("timePerTry",e)},e.prototype.stopWaterfallTimer=function(){this.stopTimer("timePerTry")},e.prototype.nextWaterfallTimer=function(){this.nextTiming("timePerTry")},e.prototype.resetWaterfallTimerIdx=function(){this.resetTimingIdx("timePerTry")},e.prototype.stopTimer=function(e){this.timers[e]&&(clearTimeout(this.timers[e]),this.timers[e]=void 0)},e.prototype.startTimer=function(e,t){var n=this;void 0===t&&(t=function(){}),this.getTiming(e)<=0?t():(this.timers[e]&&clearTimeout(this.timers[e]),this.timers[e]=window.setTimeout((function(){n.stopTimer(e),t()}),this.getTiming(e)))},e.prototype.getTiming=function(e){var t=this.timings[e];return t instanceof Array?t[this.timingIdx[e]]:t},e.prototype.nextTiming=function(e){if(void 0===this.timingIdx[e])throw new Error("AdTimings Error: ".concat(e," does not have multiple timers"));this.timingIdx[e]=(this.timingIdx[e]+1)%this.timings[e].length},e.prototype.resetTimingIdx=function(e){if(void 0===this.timingIdx[e])throw new Error("AdTimings Error: ".concat(e," does not have multiple timers"));this.timingIdx[e]=0},e.prototype.prerollPossible=function(){return this.timings.preroll},e}();var m=a(453);var g="MacIntel"===window.navigator.platform&&void 0!==window.navigator.standalone&&navigator.maxTouchPoints>1,y=a(893),w=a(573);var b=a(128);function k(e){if(document.body&&document.body.appendChild){var t=document.createElement("iframe");t.style.display="none",document.body.appendChild(t),t.contentWindow&&(t.contentWindow.document.open(),t.contentWindow.document.write("<script>".concat(e,"<\/script>")),t.contentWindow.document.close())}else document.addEventListener("DOMContentLoaded",(function(){k(e)}))}function S(){k("\nwindow.addEventListener('storage', function(event) {\n\ttry {\n\t\tconst key = event.key;\n\n\t\t// key is null when localStorage.clear() is called.\n\t\tif (key === null) {\n\t\t\twindow.top.postMessage({\n\t\t\t\ttype: 'mutateSaveGame',\n\t\t\t\tcontent: {\n\t\t\t\t\taction: 'clear',\n\t\t\t\t},\n\t\t\t}, '*');\n\t\t\treturn;\n\t\t}\n\n\t\t// newValue is null when localStorage.removeItem() is called.\n\t\tif (event.newValue === null) {\n\t\t\twindow.top.postMessage({\n\t\t\t\ttype: 'mutateSaveGame',\n\t\t\t\tcontent: {\n\t\t\t\t\taction: 'delete',\n\t\t\t\t\tkey,\n\t\t\t\t},\n\t\t\t}, '*');\n\t\t} else {\n\t\t\twindow.top.postMessage({\n\t\t\t\ttype: 'mutateSaveGame',\n\t\t\t\tcontent: {\n\t\t\t\t\taction: 'set',\n\t\t\t\t\tkey,\n\t\t\t\t\tvalue: event.newValue,\n\t\t\t\t},\n\t\t\t}, '*');\n\t\t}\n\t} catch (e) {}\n});\n")}var T=function(){c.Z.isPokiIframe&&(setTimeout(b.Z.trackSavegames,1e4),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&S())},A=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},E=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Z="none",x="requesting",I=function(){function e(){var e=this;this.callbacks={},this.adTiming=i.adTiming,this.mutationChecker=new MutationObserver(this.mutationObserved.bind(this)),this.videoState=Z,this.adTimings=new v({fake:!0}),this.initializing=!1,this.init=function(n){if(!e.initializing){e.initializing=!0;var r=n.onReady,o=void 0===r?null:r;T();var u=function(){var t,n=1;e.callbacks.playgroundInit=function(){clearTimeout(t),null==o||o()};var r=function(){e.postSDKMessage("adTiming",{adTiming:e.adTiming,specialConditions:e.specialConditions}),n++,t=setTimeout(r,100*n)};t=setTimeout(r,100*n)};if(c.Z.forceAd)return e.adTiming={preroll:!0,timeBetweenAds:12e4,timePerTry:7e3,startAdsAfter:0},void u();s.Z.debug?u():p().then((function(n){if(e.adTiming=(null==n?void 0:n.adTiming)||i.adTiming,e.specialConditions=(null==n?void 0:n.specialConditions)||[],u(),n){var r=function(e){var n,r=c.Z.playtest;if(r)return{lobbyID:r,record:!1};r=(null==e?void 0:e.playtestLobbyID)||void 0;var o=(null==e?void 0:e.playtestRecord)||!1;if(r||o){var i="4g"===(null===(n=navigator.connection)||void 0===n?void 0:n.effectiveType)&&!(0,y.Z)()&&!(0,w.Z)()&&c.Z.isPokiIframe&&!g&&"GB"!==c.Z.country;if(m.Z.track(t.Z.tracking.playtest.showModal,{show:i}),i)return{lobbyID:r,record:o}}return{lobbyID:void 0,record:!1}}(n),o=r.lobbyID,s=r.record;(o||s)&&(console.info("%cPOKI_PLAYTEST:%c loading","font-weight: bold",""),a.e(545).then(a.bind(a,545)).then((function(e){(0,e.initPlaytest)(n,o,s)})))}})).catch((function(){u()}))}},this.isAdBlocked=function(){return!1},this.postSDKMessage=function(r,o){return void 0===o&&(o={}),A(e,void 0,void 0,(function(){return E(this,(function(e){return n.Z.sendMessage(t.Z.message.sendCommand,{event:r,data:o},window.top),[2]}))}))},this.handleMessageReceived=function(n){var r,o,i,a,s,c,u,d,l,p,f,v;switch(null===(r=null==n?void 0:n.data)||void 0===r?void 0:r.type){case"hoist_displayAd_onDisplayRendered":var m=null===(o=null==n?void 0:n.data)||void 0===o?void 0:o.data,g=m.opportunityId,y=m.isEmpty;null===(a=null===(i=e.callbacks[g])||void 0===i?void 0:i.onDisplayRendered)||void 0===a||a.call(i,y);break;case"hoist_displayAd_onCanDestroy":g=(null===(s=null==n?void 0:n.data)||void 0===s?void 0:s.data).opportunityId;null===(u=null===(c=e.callbacks[g])||void 0===c?void 0:c.onCanDestroy)||void 0===u||u.call(c);break;case"hoist_videoAd_onStart":g=(null===(d=null==n?void 0:n.data)||void 0===d?void 0:d.data).opportunityId;if(e.videoState!==x)return;if(!e.callbacks[g])return;var w=e.callbacks[g],b=w.onStart,k=w.position;b&&b(),h.Z.dispatchEvent(t.Z.playtest.startVideo,{position:k}),e.videoState="playing";break;case"hoist_videoAd_onFinish":var S=null===(l=null==n?void 0:n.data)||void 0===l?void 0:l.data,T=(g=S.opportunityId,S.rewardAllowed);if(!e.callbacks[g])return;var A=e.callbacks[g],E=A.onFinish;k=A.position;if(e.videoState===x)return E&&(k===t.Z.ads.position.rewarded?E(!!T):E()),e.videoState=Z,void delete e.callbacks[g];E&&E(T),h.Z.dispatchEvent(t.Z.playtest.stopVideo),e.videoState=Z,delete e.callbacks[g];break;case"hoist_playgroundInit":null===(f=(p=e.callbacks).playgroundInit)||void 0===f||f.call(p),delete e.callbacks.playgroundInit;break;case"hoist_displayAd_destroy":var I=(null===(v=null==n?void 0:n.data)||void 0===v?void 0:v.data).containerID;e.cleanAdContainer(I)}},this.cleanAdContainer=function(e){var t=document.querySelector('*[data-poki-ad-container-id="'.concat(e,'"]'));if(t){for(;t.lastChild;)t.removeChild(t.lastChild);t.removeAttribute("data-poki-opportunity-id"),t.removeAttribute("data-poki-ad-container-id")}}}return e.prototype.forcePreroll=function(){this.postSDKMessage("forcePreroll")},e.prototype.startStartAdsAfterTimer=function(){this.postSDKMessage("startStartAdsAfterTimer")},e.prototype.muteAd=function(){this.postSDKMessage("muteAd")},e.prototype.setVolume=function(e){this.postSDKMessage("setVolume",{volume:e||1})},e.prototype.requestAd=function(e){var n=e.onStart,o=e.onFinish,i=e.position,a=e.customCriteria,s=(0,r.Z)();this.videoState===Z?(this.videoState=x,this.callbacks[s]={position:i,onStart:function(){n&&"function"==typeof n&&n()},onFinish:function(e){o&&"function"==typeof o&&o({rewardAllowed:e})}},this.postSDKMessage("requestVideoAd",{position:i,customCriteria:a,opportunityId:s})):o&&(i===t.Z.tracking.screen.rewardedBreak?o({rewardAllowed:!1}):o())},e.prototype.displayAd=function(e){var t,n=e.container,o=e.size,i=e.opportunityId,a=e.onCanDestroy,s=e.onDisplayRendered;if(!n)return console.error("displayAd: given container doesn't exist"),!1;var c=n.getAttribute("data-poki-ad-container-id")||(0,r.Z)();this.cleanAdContainer(c),n.setAttribute("data-poki-ad-container-id",c),n.setAttribute("data-poki-opportunity-id",i);var d=o.split("x").map((function(e){return parseInt(e,10)})),l=d[0],p=d[1],f=document.createElement("div");f.style.width="".concat(l,"px"),f.style.height="".concat(p,"px"),f.style.overflow="hidden",f.style.position="relative",f.style.pointerEvents="none",n.appendChild(f);var h=n.getBoundingClientRect(),v={x:(null==h?void 0:h.x)||0,y:(null==h?void 0:h.y)||0,w:l||0,h:p||0};return this.callbacks[i]={onCanDestroy:function(){a&&"function"==typeof a&&a()},onDisplayRendered:function(e){s&&"function"==typeof s&&s(e)}},this.mutationChecker.observe(n.parentElement||document.body,{childList:!0}),this.mutationChecker.observe(n,{attributes:!0,attributeFilter:["style"]}),this.postSDKMessage("displayAd",{containerID:c,adUnitPath:u(o),size:e.size,opportunityId:i,duringGameplay:(null===(t=e.duringGameplay)||void 0===t?void 0:t.call(e))||!1,location:v}),!0},e.prototype.destroyAd=function(e){if(e){var t=e.getAttribute("data-poki-opportunity-id"),n=e.getAttribute("data-poki-ad-container-id");n&&(delete this.callbacks[t],this.cleanAdContainer(n),this.postSDKMessage("destroyAd",{containerID:n,opportunityId:t}))}else console.error("destroyAd: given container doesn't exist")},e.prototype.mutationObserved=function(e){var t=this;e.forEach((function(e){var n,r,o,i,a;"childList"===(null==e?void 0:e.type)&&(null===(r=null===(n=e.removedNodes)||void 0===n?void 0:n.forEach)||void 0===r||r.call(n,(function(e){var n;(null===(n=null==e?void 0:e.getAttribute)||void 0===n?void 0:n.call(e,"data-poki-ad-container-id"))&&t.destroyAd(e)}))),"attributes"===(null==e?void 0:e.type)&&(null===(i=null===(o=null==e?void 0:e.target)||void 0===o?void 0:o.getAttribute)||void 0===i?void 0:i.call(o,"data-poki-ad-container-id"))&&("none"===(null==(a=e.target)?void 0:a.style.display)||parseInt(a.style.opacity,10)<1||"hidden"===a.style.visibility)&&t.destroyAd(e.target)}))},e.prototype.stopVideoAd=function(){},e.prototype.resizeVideoAd=function(){},e.prototype.setAdTimings=function(e){},e.prototype.setSpecialConditions=function(e){},e}();const P=I;var _,C=(_=function(e,t){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},_(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});var R=new(function(e){function t(){var t=this,n=new P;return(t=e.call(this,n)||this).SDK=n,window.addEventListener("message",t.monetization.handleMessageReceived),t}return C(t,e),t}(e.ZP));for(var D in R)window.PokiSDK[D]=R[D]})()})();
